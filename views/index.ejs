<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/css/style.css" />
  <title>Home</title>
  <script defer src="/js/sliders.js"></script>
</head>

<body>

  <!-- LOGO -->
  <div class="shadedBorder">
    <img src="/images/Web_Logo.png" width="20%" alt="Gamix Electronics Logo">
  </div>

  <!-- NAVBAR -->
  <%- include('./partials/_navbar.ejs') %>

    <!-- MAIN CONTENT -->
    <div class="shadedBorder">

      <h1>Home</h1>

      <!-- SLIDESHOW -->
      <section>
        <h2>Featured Gaming PCs & Laptops</h2>

        <div class="slideshow-container">

          <div class="mySlides fade">
            <div class="numbertext">1 / 3</div>
            <img src="https://i.rtings.com/assets/pages/6dRuEBex/best-gaming-laptops-20242028-medium.jpg?format=auto"
              alt="High performance gaming laptop" width="100%">
            <div class="text">Top Gaming Performance</div>
          </div>

          <div class="mySlides fade">
            <div class="numbertext">2 / 3</div>
            <img
              src="https://jarrods.tech/wp-content/uploads/2023/12/asus-rog-zephyrus-m16-2023-gaming-laptop-1024x576.jpg"
              alt="ASUS ROG gaming laptop" width="100%">
          </div>

          <div class="mySlides fade">
            <div class="numbertext">3 / 3</div>
            <img src="https://rog.asus.com/media/1725939492117.jpg" alt="ASUS ROG gaming laptop RGB" width="100%">
          </div>

          <a class="prev" onclick="plusSlides(-1)">❮</a>
          <a class="next" onclick="plusSlides(1)">❯</a>
        </div>

        <br>

        <div style="text-align:center">
          <span class="dot" onclick="currentSlide(1)"></span>
          <span class="dot" onclick="currentSlide(2)"></span>
          <span class="dot" onclick="currentSlide(3)"></span>
        </div>
      </section>
      <% if (user) { %>
        <% if (user) { %> <!-- only show if logged in -->
          <div id="add-button">
            <form action="/products/new" method="get">
              <button type="submit">Add New Product</button>
            </form>
          </div>
          <% } %>

            <% } %>
              <!-- PRODUCTS -->
              <section class="products-section">

                <h2>All Products</h2>

                <div id="allProductsList">

                  <% if (!products || products.length===0) { %>
                    <p class="noProductMsg">No Products Found</p>
                    <% } else { %>

                      <% products.forEach(product=> { %>
                        <div class="product-card">

                          <a href="/products/<%= product._id %>">
                            <img src="<%= product.imageUrl %>" alt="<%= product.name %>" loading="lazy">
                          </a>

                          <h3>
                            <%= product.name %>
                          </h3>
                          <p class="price">
                            <%= product.price %> BHD
                          </p>

                        </div>
                        <% }) %>

                          <% } %>

                </div>
              </section>

    </div>

</body>

</html>